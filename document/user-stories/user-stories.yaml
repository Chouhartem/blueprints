Admin stories:
  - title: Admin onboarding
    stories:
      - role: instance administrator
        what: generate individualized or multiple user invitation codes
        why: I can onboard my friends while keeping registration closed to the public
    extra:
      - background:
          - See issue [close registration unless you have been invited into a team](https://forum.cryptpad.org/d/118-close-registration-unless-you-have-been-invited-into-a-team)
          - Helps to prevent against spam/DoS registrations
  - title: Limited account creation
    stories:
      - role: administrator with limited disk space
        what: prevent malicious users from registering many accounts to bypass the
          storage quotas
        why: I can continue to provide a public service for honest users
    extra:
      - background:
          - (D)DoS attackers can register many users and upload large files
          - As attackers can bypass the (client-side) `scrypt` key derivation, it
            is cheap to register users
          - Captchas could be an option, however, it is questionable how effective
            they are. Furthermore they are bad for UI and accessibility. Captchas
            are [discussed for Mastodon](https://github.com/mastodon/mastodon/issues/877)
          - Another idea is to allow only invited participants to register, see
          - Alternatively, we can enable admin onboarding
Business stories:
  - title: Instance telemetry
    stories:
      - role: CEO of XWiki
        what: collect telemetry indicating the number of active users and  documents
          on a third-party instance
        why: I can include those metrics as a KPI in grant proposals
  - title: Legal operation
    role: CEO of an SME
    what: offer hosting of premium CryptPad accounts to individual users
    why: I can help sustain the development of the software and eventually make a
      profit
Developer stories:
  - title: Feature telemetry
    stories:
      - role: CryptPad developer
        what: measure how often a feature is used and by how many people
        why: I can decide whether its possible improvements should be prioritized
    extra:
      - background:
          - Currently possible to report back to CryptPad as soon as a button is clicked
Evil user stories:
  - title: Account impersonation
    stories:
      - who: malicious actor
        what: appear to be the account of a known target in a group
        why: their friends will add me as a contact and share documents with me
    extra:
      - countermeasures:
          - Account verification
  - title: Honeypot operator
    stories:
      - who: intelligence agent
        what: list my malicious server as a public instance on cryptpad.org
        why: I can compromise a particular demographic of users
    extra:
      - inline: (e.g., climate activists in France)
      - background:
          - We cannot technically stop malicious actors from running CryptPad instances.
          - What helps, however, is to provide a verified client, so that no malicious
            code can be delivered, and e2ee is still guaranteed.
  - title: Malicious JavaScript
    stories:
      - who: state actor
        what: seize a heavily used CryptPad server and serve malicious JavaScript
        why: I can actively collect the keys to every document when users visit the
          site
    extra:
      - countermeasures:
          - Verified client
  - title: Malicious JS - DNS variant
    stories:
      - who: authoritarian regime
        what: compel DNS server operators to direct users to my custom CryptPad front
          end
        why: I can serve whatever JS I want and use people's keys to load from the
          actual API server
  - extra:
      - countermeasures:
          - "[HSTS](https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)
            and [Certificate Transparency](https://en.wikipedia.org/wiki/Certificate_Transparency)
            can partially help"
  - title: Police informant
    stories:
      - who: law enforcement officer
        what: see who edited a document over its history
        why: I can add to the data I am collecting about a movement to track it down
    extra:
      - countermeasures:
          - "As [stated in the docs](https://docs.cryptpad.org/en/user_guide/security.html#trust-assumptions)
            we cannot protect metadata."
          - "The user's best bet is therefore to use Tor"
  - title: Terrorist cells
    stories:
      - who: white supremacist
        what: take advantage of free online services which make it difficult/impossible
          to analyze my social graph and similar metadata
        why: I can coordinate with my local, national, and international terrorist
          networks without facing any consequences for my horrendous behaviour and
          beliefs
  - extra:
      - countermeasures:
          - "We search social media and known problematic websites for links to <cryptpad.fr>"
          - "Independent instances probably lack the knowledge and resources to do
            that, so they could need some guidance from our side"
Shit user stories:
  - title: '"Access lists" without "access"'
    stories:
      - who: owner of a sensitive document
        what: add someone to the document's access list without actually giving them
          its keys
        why: it remains secure
        inline: "(???)"
  - title: Loading docs on mobile
    stories:
      - who: smartphone user
        what: open a CryptPad document
        problem: it doesn't load
  - title: Ownership
    stories:
      - who: registered user
        what: destroy a document I created
        problem: I did not choose to be an owner when I created the document
      - who: owner of the document
        what: share it with one of my contacts
        solution: add them as an owner
        inline: (I have no idea what "owner" means)
  - title: Uncertain folder membership
    stories:
      - who: creator of a shared folder
        what: lose track of who has access to the folder
        goal: cannot accidentally reveal confidential information
Honest user stories:
  - title: ciphersuites
    tags: roadmap
    id: ciphersuites
    link-to: TweetNaCl
    who: high-risk user
    what: use the most-secure cryptography for all my documents
    goal: my old documents are not readable by modern adversaries with new capabilities
    extra:
      - background:
          - There is currently no way to re-encrypt documents under new algorithms
          - Since documents may contain long-term secrets, they should be protected
            even against new vulnerabilities
      - acceptance criteria:
          - Shared URLs should still work
          - User's are not bothered with crypto details
          - There is one button to update _all_ documents
  - title: Access History
    stories:
      - who: document author
        what: see the timestamps of access for different users
        why: I know who has which state of information
      - who: participator
        what: hide the timestamps of my access
        why: my collaborators can not infer when and how long I worked
    extra:
      - background:
          - The stories are obviously conflicting, but both valid.
      - acceptance criteria:
          - Ideally, this is changeable on a per-instance basis, so that, e.g., companies
            deploying CryptPad can prioritize accountability over anonymity
  - title: Account verification
    stories:
      - who: activist
        what: verify the identity of my contacts
        why: be sure that I share my sensitive documents with the right peers
    extra:
      - background:
          - "[Verifying contacts](https://docs.cryptpad.org/en/user_guide/security.html#verifying-contacts)
            in our docs"
          - "There is no easy way to verify whether a CryptPad contact corresponds
            to the expected person. Profile pages contain the public key of the users,
            but they are not signed and hence spoofable."
          - "[_Safety number updates_](https://www.signal.org/blog/safety-number-updates/)
            on Signal's blog"
      - acceptance criteria:
          - Easy doable, both in-person and also over an off-band channel
          - User's should be encouraged to do this
  - title: Bulk settings updates
    stories:
      - who: user with many documents
        what: select a group of folders and/or files and recursively apply a metadata
          change
        goal: I can effectively exercise control over who accesses them without having
          to perform a tedious, repetitive task
    extra:
      - background:
          - This can be solved on the UI level to keep it simple
  - title: Bulk team onboarding
    stories:
      - who: teacher with many students
        what: simultaneously invite many (20+) users to a team
        goal: I can onboard my whole class without wasting a lot of time clicking
          to generate invitations
    extra:
      - background:
          - Introduced in [5.2.0](https://github.com/xwiki-labs/cryptpad/blob/main/CHANGELOG.md#520)
  - title: CLI API
    stories:
      - who: self-identified power-user
        what: automate some actions on my account with a headless JavaScript API
        goal: I spend less of my time manually clicking through tedious browser UI
    extra:
      - issues:
          - title: "Create a way to access to files uncrypted"
            reference: 939
          - title: "(File system) clients â€“ Understanding document & communication
              structure"
            reference: 617
          - title: "[question] Pulling a pads content in an automated way (Code /
              Markdown)"
            reference: 734
  - title: Contributor attribution
    stories:
      - who: "document's creator"
        what: see who made which changes
        goal: accurately assign credit or blame
    extra:
      - background:
          - There `are author colors` in the `Code` app providing the same feature
          - issues:
              - "[FEATURE REQUEST: Color by author #41](https://github.com/xwiki-labs/cryptpad/issues/41#issuecomment-464351139)"
              - "[Allow to see authors of changes in history #969](https://github.com/xwiki-labs/cryptpad/issues/969)"
      - acceptance criteria:
          - The contributor attribution is cryptographically bound, i.e., you cannot
            pretend to act as someone else
  - title: Delegated upload quotas
    stories:
      - who: registered form author
        what: add an upload question to my form
        goal: people can submit images/files as part of their response
    extra:
      background:
        - "To protect from DoS attacks, we only allow registered users to upload files"
        - "Registered form authors could delegate their right and allow unsigned users
          to upload files on their behalf"
        - "The form author should not be the owner, as otherwise malicious user can
          put illegal content to other users"
      issues:
        - title: "Allow file upload in forms"
          reference: 790
      acceptance criteria:
        - title: "The upload is limited in size"
          done: no
        - title: "The form author is not the owner of the uploads"
          done: no
        - title: "Ideally there is a system where registered users can arbitrarily
            delegate their quota"
          done: no
  - title: "Document format upgrade"
    stories:
      - who: "document owner"
        what: "upgrade my document to a new format without fully breaking existing"
        goal: "I can enjoy its new configuration options without great inconvenience"
  - title: "Efficient smartphone login"
    stories:
      - who: mobile device user
        what: "generate a short-lived QR code to authenticate my secondary devices"
        goal: "I can bypass the slow and battery-consuming key derivation process
          that happens at login"
    extra:
      background:
        - "`scrypt` is designed to consume a lot of resources, so that bruteforcing
          is expensive (impossible)"
        - "Comment [Cryptpad is blank on mobile #266](https://github.com/xwiki-labs/cryptpad/issues/266#issuecomment-411040206)"
        - "People probably have regularly a computer besides their phone. They could
          therefore do the key derivation on the computer and then transfer the derived
          value to their phone via a code. As long as they do not log-out, they can
          always read the content."
        - "Risk: users get confused with this QR code and share it mistakenly with
          an attacker, the only way to redeem is to change the password"
